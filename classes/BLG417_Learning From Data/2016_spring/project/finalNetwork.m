function [y1] = finalNetwork(x1)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 30-May-2017 12:41:09.
%
% [y1] = myNeuralNetworkFunction(x1) takes these arguments:
%   x = Qx26 matrix, input #1
% and returns:
%   y = Qx9 matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [1;1;1;1;1;1;1;1;7.20526537739303e-17;3.37959696808795e-20;3.86884718178252e-20;7.23337684903712e-20;3.88705491938154e-17;2.49545991823191e-18;2.54089021720424e-17;8.83169040838379e-15;3.47900061130244e-18;1.01748485267689e-11;6.42524303923939e-15;5.97447615853344e-14;1.37817400802057e-14;3.01944079172632e-14;4.94484699228031e-12;3.53582381290299e-12;4.65096173298149e-12;6.40512762331961e-13];
x1_step1.gain = [0.25;0.25;0.25;0.25;0.25;0.25;0.25;0.25;2.00054271589588;2.00196506518175;2.03033308175524;2.00006837657253;2.00000098001331;2.00000013878203;2.00017438371178;2.00000000000098;2.00010580655561;2.00747457183629;2.00525200041235;2.03689918009558;2.00943022927286;2.00000003296264;2.00000074692;2.00024695997739;2.00000000042512;2.00000600168131];
x1_step1.ymin = -1;

% Layer 1
b1 = [1.6432963698982381;1.3537254076255751;1.3367246251737603;-1.0639248476871057;1.2191590088573581;1.0246132693997725;-1.0543133684152051;-0.93940962802395045;0.92016857977348943;0.73742755667238902;0.49791966786321906;-0.49389972670455079;0.18588498012851959;0.18713634425821027;0.045063404272782159;-0.14858445178687013;-0.42396768322841488;-0.1477295783314411;-0.342977881436623;-0.67570901202508593;0.37144840829179582;0.70549030917818534;-0.77425966245702893;1.0963953057912619;-1.0023784747034066;-1.010697458560412;-1.2864635455568281;1.2310582061618431;-1.5599706122067003;1.6437422853895907];
IW1_1 = [-0.18355249346308625 0.743328263942308 -0.60961159222481875 0.050784932166854292 -0.46173342220913027 -0.19523598238842502 0.16556370350360475 0.36973928116466859 0.39489586871102356 -0.22216735614819882 0.093345256068916846 -0.66972368131448434 -1.0081678567590251 0.075025040033883869 0.62417146735147244 0.43030317452955907 0.13495044937008577 -0.085500949797647802 -0.13297274072404033 0.18116742264493246 -0.46847105599817113 -0.12722901493014857 -0.41187419698069488 -0.09451803594743613 0.32599155401064539 -0.05781893206069947;0.0019290166016088239 0.35606284960724921 -0.046857892696279255 0.27295216327235911 -0.15670386423159405 -0.29236827640050639 0.55229153375594009 -0.034529474115417493 -0.055044638612288907 0.23608812389467176 0.80503445530890649 -0.28213414995402791 0.69660493385888567 0.013539976014237136 0.82950921974895109 -0.20477464507620241 -0.068304260828217112 -0.206342191769424 0.019292510077756172 -0.28878385370783599 -0.23006599237960629 0.73901993314053194 0.015278487628340644 0.13344548203880052 0.40016325681602 -0.61802525815599885;-0.10579333181113407 0.056256392534735432 0.22092754944754017 0.27841139189164299 -0.25208599774444762 -0.10266599724685965 0.26368621039769186 0.30275932460008148 -0.54780269096596423 -0.32570043640472846 0.60352277378594621 0.11411295420907903 -0.020107047382196389 -0.31499661184430644 -0.13954244705048716 -0.50332760816192668 0.33890825116672263 0.22002385978784803 0.21033167593281674 -0.20031280164611218 0.4939202850920783 0.071946195090966905 -0.74838316452002607 0.052355140891275603 -0.54024926551076824 0.63476328966727613;-0.016276689576650898 -0.14396504661232387 0.30356080178473893 -0.25283851947496339 -0.48940847405462273 0.10135908439117032 -0.33531348116530513 -0.083452229769085118 -0.88725014130834146 0.21718743797971141 0.45497366494118202 -0.31564151044005112 -0.29016194567534503 -0.73133676621547572 -0.087862176779913287 -0.62567285685405338 -1.2627800935322657 -0.3404702600957461 -0.36914186475428717 -0.1216816326639895 -0.22920109658503754 0.10356994693535446 -0.25316098586452157 0.47328646174995909 0.3252491694932983 -0.76624748036730028;-0.40795678713087646 0.019131720198751794 -0.94437294178993136 0.094556898969304151 0.0060492741215565759 0.033012062543120835 0.12382946587181326 0.29399812248870766 -0.42638568084543765 -0.10800372138791788 -0.46582551956669827 0.7493335440621377 -0.25148221083723782 0.7544810678485433 -0.052523206758379952 -0.25582997092979748 -0.55486364643593011 0.47480058878866649 -0.01266407727463699 -0.50114143545573131 0.20862253873829115 0.14888626478288983 0.58769691297105087 0.27265974126079928 -0.16897248122929237 -0.0067939913298854342;-0.1393647759237733 0.19793577939338108 0.0067499487422258645 -0.11443834947169133 -0.26140585262602761 0.27426244336906197 -0.50003599409396893 0.32149464139599182 -0.39496823422880073 -1.0043451404057744 -0.09270170814596268 0.23485101319045193 -0.987347352798849 0.63377336680273522 0.70866746861022933 0.50416364656305013 -0.28902484619339264 -0.15639626559900488 -0.24932769955413778 0.18662465588903138 -0.4570258809800099 -0.36982608148009544 0.96275464974592562 0.96622328988485406 -0.29085427803546965 -0.11642369970043159;0.44083264254104187 -0.17945236871035097 -0.54749853529006853 0.074997772384880132 -0.032751393255051137 -0.070471515998291337 -0.037985026767477836 0.178823150689632 -0.72531661986835261 0.18620914454461102 0.30053727691148158 1.3865645835830473 -0.55547040504122114 0.66546646755906824 0.3857838819161985 -0.06019406526462362 -0.1842966607354185 -0.98574512600369324 0.39099942981128433 0.49123602255182797 0.94514940782681256 -0.51091597441783998 0.29654924599398774 0.22154334565780806 -1.1029188990771186 -0.32945788035320317;-0.08156633751366571 -0.47504760380437189 -0.47384906778748448 -0.2232451230472563 -0.47197624989788745 -0.22437884353181259 0.30838808867523021 -0.22695099378726361 -0.46970250548969616 0.56691190127643498 0.24472028488144759 -0.1300079560788181 0.31172090103608296 -0.11641564266629907 -0.5741541912992999 0.3604616241392532 -0.45986620937946548 -0.049257386858512435 -0.20456831827363953 -0.1053856325512373 -0.15287326301536047 0.85860094290829014 0.13452344432339974 -0.5405888810639059 0.64314940434723999 -0.15441040534351549;-0.27048395830341371 0.44024720151286573 0.42803371376591215 0.78035558403574878 0.12126751186315418 0.41198970513631433 -0.092203954769135649 0.089279889185774189 -0.43318477185715221 -1.3481639345746983 0.3023471560704642 -0.19847254605480452 -0.51616367785578077 -0.27618342684988156 -0.54060797175796083 -0.66031377233036714 0.058309764335573819 -0.21799155116227795 -1.0117158537840329 0.50401617039954572 0.10001815730880842 -0.2979846970490036 -0.20917607197845919 -0.20378017462958162 0.10724691230715405 0.22934285922660466;-0.58842599050648514 0.16412924544377921 0.64813132867864132 -0.42708738494741388 0.0031235947063883631 -0.37828261580186456 0.33027544672542952 -0.55543657168854266 -0.15720169263868009 0.11401222798484741 0.2163536348667387 -0.0048547908613296737 -0.072493562759380598 0.20602564043636598 -0.55544049807652029 -0.098077223382241993 -0.59440562090507376 -0.023351143975222775 -0.58090457408702578 0.084781522521937824 -0.25351817407191884 -0.1490732558901805 -0.2503982585591259 0.0078948923184992571 0.26700928532479246 -0.5490067435630166;-0.21030672517672819 0.19970380203466995 0.2369558949512936 0.23379572913089458 0.50767054738207995 0.238348467302162 0.10657298944135613 -0.089634810554316671 -0.59231245878127015 -0.15224071165413111 -0.58018214830088199 1.1807777803064281 0.58277961205654938 -0.34302207845311966 -0.24093461538127744 -0.13468124349616806 0.24176706799612352 -0.31300648582793628 0.35550492269102252 -0.23837143072192563 0.25687335239146863 0.12929910330120081 -0.62145389644662119 -0.58356601226812277 0.020185578060680793 0.16284119078230758;-0.070774761619693885 0.098399423100750533 -0.14142734701336443 -0.0027545705058762918 0.44330630253719677 -0.3071667722947623 -0.16776769044295434 -0.069081297871295147 -0.14673242790486749 0.81030925694149292 0.35128666345937504 0.57388544489426063 -0.73176336226615202 0.30885463075755126 -1.4754960431177551 0.52374947073158118 0.72412259261595846 0.12241991928259763 0.30081589271395015 -0.13380847345798941 0.19946037100438921 -1.2584759525768243 0.46793634549354646 -0.65521181538224904 0.6314281825689414 0.85377809288336604;-0.099780153938062527 0.62910467046255492 -0.11976695757938251 0.19706366602735195 -0.34268769141646721 0.19002260953386016 0.1434836439577418 0.25780406231285058 -0.026401638271168947 0.16511039718297787 0.35841954745587762 -0.36226369094692495 -0.10572050361245514 -0.17732892048387378 -0.51078509033311681 0.053014554089959663 0.96711425146128849 0.088624014710936727 -0.030421515741459359 -0.39456310208682405 -0.67219957676816611 -0.059471099603671189 0.10508817814882015 -0.068953891160304648 -0.18090211701763592 0.47820307030798864;-0.2604770140259266 0.27249240753837534 0.27528006172280456 -0.27262970158360544 0.058814010837162027 -0.31659278319287409 0.2132374358208973 -0.53310211582946032 0.0024557485165876223 -0.43882732992208501 -1.0655172031472631 0.17182151397138587 0.28064713276091785 0.10892137293020296 0.13044463947562979 -0.12746354583469605 0.80378347240178316 -0.020856487895259384 -0.38955346119672352 -1.0526197036766529 0.068411217698109733 -0.22905815339851776 0.1589628977269778 0.1161530034848442 0.13956267974468645 0.54007358444543663;0.20192377472402451 -0.13572877805376243 -0.074508697035086155 -0.033400698324573035 0.50704455732464493 0.069822219717846815 -0.28241262568158176 -0.37262962044216047 -0.19560796946012576 0.49391949759653431 0.091456489956275269 -0.24482707298048359 -0.30391236453944259 -0.34027309157213054 0.17077877114026022 -0.51823994528625628 -0.5082075672889711 0.45434145046345803 -0.27978893601736615 0.053693778759825256 -0.08171689463533531 -0.078488476778520361 0.35669583039945274 0.14359831551848823 -0.35481643772822863 -0.72512581375069463;-0.37216928537019239 0.174469749077722 -0.3771998107441904 0.028076451870086581 -0.070346837605838819 0.1006624474575442 0.3657180520371105 -0.12650302306311048 0.76258317165220302 0.14720443832621496 -0.09392218080774542 -0.23940943051800073 -0.045700418496406492 -0.61405693359579749 0.16023327684941899 0.41113587850130245 0.22676356760488137 0.54719366989132845 -0.70447651826615043 -0.22559319531559854 0.11030132994319312 0.19512461472509152 -0.23710969399184437 -0.12502299855015583 0.87251294614807973 0.51090823284759967;-0.038929928195760084 0.28112501286611125 -3.0106277734360578 -0.30586460153953365 0.24868480152576397 0.067551021345107584 -0.32495472237728046 0.037690008129761407 0.44338987112468736 0.19109537338286395 -0.35217590520330466 0.033584649761565666 0.83397465427108708 -0.092561817210162989 -0.14457305567492559 -0.077583639263317891 0.700085157185805 0.07936603489081738 0.32662412896376264 -0.041112775267220243 0.00745238878412691 0.081846871108272462 -0.43716892696156173 0.14479965163883149 0.47773995628625116 0.015653947765998863;-0.096667733398036415 0.36747633036748212 -0.278539249355371 -0.24328247005403786 -0.097770085385523564 0.52507020653304515 -0.2994913395250639 0.46785005102614852 -0.027828382457858004 0.14879500883535132 -0.68598349320010921 -0.37838697671970806 -0.47268410276441825 -0.56568592177999766 -0.10469805071665216 -0.3737763864150046 -0.24604347094506107 -0.29774597443289158 0.31806159537908024 -0.059820290340794342 -0.22840663385560883 -0.52232105391132133 0.04114750463869829 -0.14656209625341984 -0.14386702469756146 -0.39160085261439637;-0.04528289574892172 0.4076891256082516 -1.8750271421298439 0.072197780937667808 -0.42106257359005383 0.20241126421356914 0.011311241336991001 0.20344873445137343 -0.4423279343077236 -0.39144897756274688 0.11957445172811562 -0.50374278157097818 -0.11911786302255334 -0.14097772313730703 0.65730976968283861 0.13062148553706193 -0.37396033682222396 -0.30921394850907619 -0.39683623307139715 0.64567125131360703 -0.23800682785901425 -0.69132751098369083 -0.28867680511828736 0.59033262156069466 0.044746310223850595 0.051519100777160889;-0.25085184466439592 0.36138833338912424 -0.018269842569926458 -0.28917769070855182 0.38831724064552336 0.21779402666923711 0.12568806017695969 -0.48222910349419901 0.50245139951115592 0.28367884017163919 0.053084100739877592 0.3772546182917596 0.30660396548846197 0.42524381388501803 -0.16837501300498187 -0.010086289773073765 0.28103797134688369 0.64112418777335356 0.24383460279596755 0.35756302819573954 0.26560992084354895 0.093408574382817605 -0.085974004686490427 0.5278443976177305 -0.073997093580602691 0.55627116777503571;-0.063215764844711517 0.19149615634621975 -0.17124751241384087 -0.069233355715662429 -0.17179966604005201 0.48569118590520532 0.23525462381440287 0.24729339486548182 -0.043528495528464412 0.43697140694264691 0.1953456772167389 0.14375790634355695 -0.023783707727581083 1.2974940982942109 0.53441524060443535 0.25419768622676958 0.74088094198078303 0.075971829908029434 -0.030112760168435379 0.12751006002829357 -0.20156466811637749 0.18013752168552644 0.56221834772673218 0.22536116984260032 -0.51461507311089427 0.091110782479534469;-0.26945908797229068 -0.39901340206397545 2.5514912604201867 0.89809159613821976 0.38641548316068192 0.35829490396408425 0.25815600116368964 0.0073420721479578628 0.37205192547202015 0.25024829004733579 -0.21986573633031534 -0.22885178911979057 0.74559258854941557 -0.34576174273565247 -0.42917321196491792 0.3515002513948759 -0.044332588838837464 0.21878264639620915 0.27001508288749571 -0.28807275621117473 0.19170791965501693 -0.22162466683295215 -0.39634894297731377 -0.41243704055269953 0.79498396247706749 0.10007400839404981;-0.46307044329240737 0.58178964037671022 -0.31393670014371111 0.083081272526953132 0.1680379140603569 0.24476983042886649 0.10061006679091181 -0.053403620080494069 -0.22354558989396064 -0.17619549802667483 0.034174219937862654 0.26127880950953047 -0.34642049698526972 -0.24238862969680236 0.65935364553207576 -0.57200307605866385 0.19298415496019691 -0.0063854250803646985 0.51296145732339005 0.40219581931820175 0.25687773347076492 -0.62058135983803075 -0.4102968422665666 0.38229332807792382 -0.37244938223650659 0.11149188191743899;-0.4012853432209782 -0.74550226167503764 1.0888054712826611 0.11989159026484583 -0.096989147285701557 0.17639482346394775 0.052654165613902744 -0.53851070646978227 -0.010517294982080108 -1.2579388515685139 -1.103460578090157 -0.0036003644329353317 -0.11066564565412661 0.14763164692481373 0.4153534367305366 -0.025712797968355988 0.28402359114542175 -0.27947552546226873 -1.2544802506938344 -1.0555704684459153 -0.23700126956305151 -0.086106209829021785 0.34931250813919557 0.45344938223376219 0.22562151122544499 -0.007978419249859257;-0.46978643125288039 -0.074341938894590079 0.91749410300199097 0.12592062773693774 -0.063769435859141757 -0.18387198693337861 0.06814356098380811 0.1410869161498568 -0.74178857305799772 -0.084793707791964268 0.26522078012974515 0.15443549632026507 0.79618192929870069 0.68637714912050984 -0.8041734193009441 0.54903807915846903 0.091558415224723633 -0.68027501145005331 -0.12541271194137271 0.13575254128081068 -0.36530581658281674 0.40335411444722508 0.42247365907528045 -0.28252469581447448 0.27536592896795525 0.48235247069419085;-0.21781503509227895 -0.16474139614838951 0.043478264251285773 -0.29626045407974116 -0.13336553786014693 -0.017556049206911291 -0.037700267401208021 -0.13346544357378592 -1.3788353279523708 0.14761348365844723 0.88805677302212971 -0.62882609698213265 0.25957990695637795 -0.44019947651005309 -0.25200194187206054 0.14683859920766196 -0.30175691857708931 -0.89669110058258938 0.05128032436855285 0.67461451301041286 -0.25773170668200107 0.15078346405292301 -0.47611181866410673 -0.042720339458856615 -0.19108011027680341 0.65433182293530057;-0.033689584657836918 -0.20960750053049609 -0.46708694724555372 0.14382945336507752 -0.30917208646939387 0.63329826532407552 0.60827686144292503 -0.33878499140309876 -0.15091010770674171 0.12373208874780307 0.13445931744525888 0.40832746867029418 0.33265712727460983 0.17838484794916926 -0.012605243108489641 -0.43405465805259802 -0.013908812410885572 0.23250895478876055 -0.41297998177385709 0.47710035831977332 0.30011390510469826 0.34102898949761101 0.058832221935376114 -0.17916181611823306 0.28160050401072412 0.30945163873645026;0.19291280537892022 -0.33235890580746952 -0.73827599068641281 -0.80240301937766756 -0.55590688862532622 0.083742502010034595 -0.35976498344133412 -0.30351053405273315 0.098024521370143475 -0.22461066762102858 -0.041278616889941465 0.21412264009234383 0.22938617981495052 -0.27937383762199841 0.0353705115822079 -0.88937416721690377 0.62587549055642977 -0.089644265783020594 0.35563803518052434 -0.28348770213931257 -0.12625626586551056 0.142165965218396 0.22708065719853532 0.39724276359421562 -0.91272363001009793 0.68660431873151107;-0.55603106378482658 -0.0050011933561815089 0.27317862812869081 0.24466677705779838 0.38466860804184466 0.16735680415804161 -0.18301736425005943 -0.10511714789448413 -0.83885491112109956 0.86054890333064915 0.36204299863600031 0.46264882753586473 -0.27365576873733399 0.34900963462017559 -0.32125875984418262 0.35088203178117833 -1.2486751042836735 -0.19224656674579355 0.23938743582934291 0.48339284973781182 0.53971216509411168 -0.28707822103359709 0.72330767317160061 -0.25492700767308218 0.6131829482282285 -1.0026990378415963;0.21684630649653372 0.33866042310464373 0.50211063595248462 -0.1718913606027844 0.53886368600680623 0.45513016747325097 -0.6521713858857876 -0.077371977215201296 0.060713708633969542 0.23232029548470368 -0.18732858362971147 -0.16058237709004464 0.07381460167988857 0.12193077784158016 -0.14873433487679388 0.20890785916038998 -0.47341225560801103 0.29105782827413057 0.4976005828030306 -0.26983839763275724 0.16559847011795994 -0.26823903821246603 -0.10245380422446204 -0.42879942842444801 -0.17649814164684474 0.1824922456932099];

% Layer 2
b2 = [0.50291044177281186;0.37985081549455146;0.2676293391416289;-0.58024358330968806;-0.30367257128810959;-0.58282104910063892;0.10389925018029042;0.78920149461816935;-0.6066318583231789];
LW2_1 = [0.92015035076874441 -0.5666668039950481 -0.6657643167045737 0.18943629200003523 -0.49912962563318342 -0.2445621399833911 -0.62482404202581365 -0.061118620709174003 0.65007117125889158 -0.65190088068656682 -0.82163906179624846 0.20909364968821292 -0.016521869407809076 0.38798258958313747 -0.64660046912730995 0.73809197320610131 0.95914998280363528 0.29326557184782132 -0.37926880986616884 0.62585877762588815 -0.64007294523788272 0.026486601073002509 -0.054862435036517221 0.39750640630239775 -0.90424278433554772 -1.1623586388766702 0.35777409817844735 -0.22792783444566705 -0.4141526623055321 0.3336647724364068;0.304963754868739 0.85088046886043056 0.72172934727602411 0.71854948166702259 0.56476702430278347 -0.099750234941771834 0.82599144900602528 0.74321330144044395 -1.1731314768789025 0.39128818442538288 -0.54415402499323462 0.85180427428239458 0.060728455862952717 -0.053628319485382339 -0.13807526347417401 -0.81592529080503051 0.58682223325737792 -0.057427830289442747 0.65402840737005508 0.31192270415674372 -0.81042165346574846 0.3757540942705021 -0.16616504682764136 -1.6303574876368376 -0.51629494004581156 1.9509082913853029 0.41585822545005502 0.15267149753942696 -0.23318782042124281 0.42372981241462565;-0.039745319562500811 0.53948524807932541 0.55776662913248909 0.89902537105609626 0.41769919206639872 -0.78366575553220275 0.19966589221259537 0.50124756025890571 0.72172245999200757 -0.47506875705530832 -0.31772352997668213 0.83472180484702296 0.070874194357301926 -0.34515999823815285 -1.0244368205362075 0.17308509305734565 -1.9593062273151132 -0.83675985078294945 1.03003798943423 -0.027199604126959397 -0.028386676125361356 -1.3932481343042327 0.6008876873043888 -1.1202458808299616 -0.76628815241138293 1.4161811896498355 0.22424279424388302 -0.20256543408210281 -0.10966206371035324 0.12946932769725947;-1.4880649432274333 -0.10059038183910986 0.87692240918970366 0.74216205663121426 0.95202884255949327 -0.97268285283696054 0.84448959234355225 -0.58255259445604535 -0.29171031329153718 0.60152193499244944 0.87458915224389344 0.29319987578091328 -0.73387130309708626 -0.086678706690120441 -0.48015378083008486 -0.7219225605101951 -1.2780303085882989 0.75330687063423563 -0.24531704899059742 0.80639578083749153 -0.58705967796728986 -1.2093460720626878 -0.091546664245513484 -0.091808448624972283 0.31954573871676467 0.25269746053695408 0.746886044974026 0.84105013144797758 0.33744539138523749 -0.22486273471550541;-1.5077255568664745 0.74337203243686278 -0.67416047037378324 0.40704608286107019 0.072406934004692614 -1.1469939948626959 -1.1478349901604328 0.58280942850725703 -0.42155532374081928 -0.48906833707646841 0.38106301402112319 -1.0320692950533963 -0.020832626013485501 0.26618213582361738 -0.7640868579972605 0.10694727949737996 0.18054639642213816 -1.0991792185471263 -0.15234354205236497 -0.37964107302867783 -0.4733231975389226 1.3896611061373587 -1.0979283889086944 -0.3153346433358879 0.43086548709442535 0.89149919010347844 0.0055000124493110236 1.8065598424179801 -0.87105328606982824 0.20619520512741954;-0.6051303563020024 -0.26761190096078918 -0.46485078348339348 -0.92586300871886118 1.1542714730356343 0.83273010439326767 -1.0581887018478573 -0.049709183860187127 0.50573767680980819 0.73267438635750237 -0.35837794575398763 1.0102220708579486 -0.39871808320392832 0.4842820067588019 -0.77248944034714606 -0.5011507298416098 -1.1783941352512683 -0.2509193172492824 0.52068114149471134 0.45373732250911986 0.56035482788394442 -0.082504864988559218 -0.15403025451352131 1.2940132707197993 0.37608258081746054 -1.1858006237251171 -1.0112714352709802 0.3840445234816926 1.30950884473764 0.58588971389585254;0.41828897623158501 0.466200630107655 -0.20041056807889276 0.77629824327070374 0.16367395178634656 0.37321201414321292 -0.074592703655045167 -0.33676553098616457 -0.74119994588489524 0.15860508379980562 -0.80711252220321505 -0.97722096806376235 -0.95354977953727538 -0.32091064621061738 -0.41821707669204983 0.11876456072471391 -0.030608346372340778 -0.6202070224060976 0.98059722617000511 -0.55339229399099832 -0.068298403119171139 0.76519086993494467 0.3942268940946943 0.28231711647605623 -0.52538250259361474 -0.3776891688511782 0.86143709842173088 -0.14049679427896389 -0.26887011670045569 0.62292859602965489;0.60439581499545947 -0.48426171290360298 -0.38402718547901532 0.85376507536308899 -1.2138864949722772 0.17605491067807194 -1.2402692927396188 0.42948473464553755 0.089563912037030305 0.57991884204731825 -0.83499262290086684 0.26276257278591736 0.014922478763832091 0.066620513661879988 -1.0466706465012225 0.17362855717991885 0.54236535656342866 0.81721473791329724 0.76831295349192719 0.015022808528779508 -0.88488455605470728 0.81674401892826509 -0.92699904101119124 -0.06959197547887376 0.95806949985857359 -0.37983724755770226 0.28231321470538806 -1.2501838834930323 0.44398563560269605 -0.63106445181399629;-0.17071535286770098 -0.78183675004627717 0.93401383016778339 0.19880040754390307 -0.53525441747136537 -0.27430149182629882 -0.31873689695194113 -0.11489215202954212 0.018065799475684968 -0.38467521670572086 -0.29267218902733305 0.56023529082983703 1.0340603545241613 1.1708406434306933 -0.71526215426441442 -0.18900116602749015 0.56237815078663567 0.56443811916315967 -1.4781249872180662 -0.64781371169206714 -0.45109442816999445 -0.59081948306853638 0.46666178371537165 0.98931376594237319 1.2134689090996431 -0.15415797557814861 -0.037559529036984229 -0.66380853495918857 -1.3092615532135126 -0.61381234180178723];

% ===== SIMULATION ========

% Dimensions
Q = size(x1,1); % samples

% Input 1
x1 = x1';
xp1 = mapminmax_apply(x1,x1_step1);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = softmax_apply(repmat(b2,1,Q) + LW2_1*a1);

% Output 1
y1 = a2;
y1 = y1';
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
y = bsxfun(@minus,x,settings.xoffset);
y = bsxfun(@times,y,settings.gain);
y = bsxfun(@plus,y,settings.ymin);
end

% Competitive Soft Transfer Function
function a = softmax_apply(n,~)
if isa(n,'gpuArray')
    a = iSoftmaxApplyGPU(n);
else
    a = iSoftmaxApplyCPU(n);
end
end
function a = iSoftmaxApplyCPU(n)
nmax = max(n,[],1);
n = bsxfun(@minus,n,nmax);
numerator = exp(n);
denominator = sum(numerator,1);
denominator(denominator == 0) = 1;
a = bsxfun(@rdivide,numerator,denominator);
end
function a = iSoftmaxApplyGPU(n)
nmax = max(n,[],1);
numerator = arrayfun(@iSoftmaxApplyGPUHelper1,n,nmax);
denominator = sum(numerator,1);
a = arrayfun(@iSoftmaxApplyGPUHelper2,numerator,denominator);
end
function numerator = iSoftmaxApplyGPUHelper1(n,nmax)
numerator = exp(n - nmax);
end
function a = iSoftmaxApplyGPUHelper2(numerator,denominator)
if (denominator == 0)
    a = numerator;
else
    a = numerator ./ denominator;
end
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
a = 2 ./ (1 + exp(-2*n)) - 1;
end
